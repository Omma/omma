{% extends "OmmaAppBundle::layout.html.twig" %}

{% block content %}


    <script type="text/ng-template" id="user_select.html">
        <div class="input-group">
            <input type="text" class="form-control" readonly placeholder="eigener Name">
        </div>
    </script>

    <div class="pull-right">

        <div class="header-button" on="status" ng-switch="" style="margin-bottom: 25px;">
            <button ng-switch-when="saving" class="btn btn-default disabled"><span class="glyphicon glyphicon-refresh"></span> {{ "app.saving"|trans }}</button>
            <button ng-switch-when="saved" class="btn btn-default disabled"><span class="glyphicon glyphicon-ok"></span> {{ "app.saved"|trans }}</button>
        </div>

    </div>


    {% verbatim %}

    <h1>Alle ToDos</h1>

    <div ng-controller="allTodosController" class="all-todos">


        <div ng-repeat="todo in todos">

            <div ng-class="{'done': todoIsDone(todo)}">
                <accordion>
                    <accordion-group>

                        <accordion-heading>
                            <i class="fa" ng-class="{'fa-exclamation': todoIsImportant(todo)}"> </i>

                            {{ todo.task }}

                        </accordion-heading>


                        <div class="row">
                            <div class="col-xs-12">
                                <p>
                                    <span class="bold">Titel: </span>
                                    <span class="edit-title"><a href="#" editable-text="todo.task">{{ todo.task || "empty" }}</a></span>
                                </p>
                                <p>
                                    <span class="bold">Beschreibung: </span><br>
                                    <i class="edit-description"><a href="#" editable-text="todo.description">{{ todo.description || "empty" }}</a></i>
                                </p>
                            </div>
                            <div data-toggle="modal" data-target=".todoModal" ng-click="setTempTodoToDelete(todo)"><div class="btn btn-danger pull-right" style="margin-right:10px;"><i class="fa fa-remove"></i></div></div>




                        </div>
                        <hr />
                        <div class="row">
                            <div class="col-xs-2">

                                <input type="checkbox" ng-model="todo.status" ng-checked="todo.status">
                                <span class="bold">Erledigt</span><br><br>

                                <input type="checkbox" ng-model="todo.priority" ng-checked="todo.priority">
                                <span class="bold">Wichtig</span>

                            </div>
                            <div class="col-xs-5">
                                <span class="bold">Zu erledigen bis</span>
                                <div class="form-group">
                                    <div class="row">
                                        <div class="col-xs-12">
                                            <input date-picker class="form-control date-picker" type="text" date="todo.date" />
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xs-12" style="margin-top:35px;">
                                            <timepicker class="time-picker" ng-model="todo.date" hour-step="1" minute-step="5" show-meridian="false"></timepicker>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-5">
                                <span class="bold">Aufgabe einer Person zuordnen: </span>
                                <user-select selected="todo.user" ng-model="user"></user-select>
                            </div>
                        </div>
                    </accordion-group>
                </accordion>
            </div>
        </div>


        <!-- Todo Modal -->
        <div class="modal fade todoModal" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">
                            <span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title">ToDo löschen</h4>
                    </div>
                    <div class="modal-body">
                        Wollen Sie diesen ToDo Punkt wirklich unwiderruflich löschen?
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Nein, doch nicht</button>
                        <button type="button" class="btn btn-danger" ng-click="deleteModal()" data-dismiss="modal">Ja, löschen</button>
                    </div>
                </div>
            </div>
        </div>


    </div>
    {% endverbatim %}
{% endblock %}